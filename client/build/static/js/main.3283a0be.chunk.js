(this["webpackJsonpreact-app-template"]=this["webpackJsonpreact-app-template"]||[]).push([[0],{51:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},79:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),r=a.n(c),i=a(42),l=a.n(i),s=a(15),o=(a(51),a(2)),u=a(4),j=a(5),d=a.n(j),b=a(10),f=a(11),p=a.n(f),O=(a(72),function(e){var t="my-button "+e.className;return Object(n.jsx)("button",{className:t,onClick:e.onClick,value:e.value,children:e.children})}),h=(a(73),function(e){return Object(n.jsxs)("ul",{className:"nav-list",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(s.b,{className:"link",to:e.profileRoute,children:"Your Profile"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(s.b,{className:"link",to:"/profile-list",children:"Profile List"})}),e.authorized&&Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(s.b,{className:"link",to:"/new-profile",children:"Create New Profile"})}),Object(n.jsx)("li",{children:Object(n.jsx)(O,{className:"logout-button nav-item",onClick:e.logOut,children:"Logout"})})]})}),m=a(44),x=a.n(m),v=a(43),g=a.n(v),k=(a(79),function(e){var t=Object(u.g)(),a=Object(c.useState)(),i=Object(o.a)(a,2),l=i[0],s=i[1],j=Object(c.useState)(),f=Object(o.a)(j,2),O=f[0],m=f[1],v=2===l,k="/profile/"+localStorage.getItem("user-id"),N=Object(c.useState)(!1),S=Object(o.a)(N,2),w=S[0],y=S[1];Object(c.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/profile/".concat(a),{headers:{"x-auth-token":localStorage.getItem("x-auth-token")}}).catch((function(e){return console.log(e.response.data.msg)}));case 2:(n=e.sent)||t.replace("/login"),s(n.data.data.authorization);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(localStorage.getItem("user-id")).catch((function(e){m(e)}))}),[t,l]);if(O)return Object(n.jsx)("h3",{children:O});return Object(n.jsxs)(r.a.Fragment,{children:[Object(n.jsxs)("header",{className:"header-container",children:[Object(n.jsx)("div",{className:"title-container",children:Object(n.jsx)("h3",{className:"header-title",children:"Progress Tracker"})}),Object(n.jsx)("nav",{className:"hamburger-toggle-container",children:Object(n.jsx)("div",{className:"hamburger-toggle",onClick:function(){y(!w)},children:w?Object(n.jsx)(g.a,{}):Object(n.jsx)(x.a,{})})})]}),w&&Object(n.jsx)(h,{profileRoute:k,authorized:v,logOut:function(){localStorage.removeItem("x-auth-token"),localStorage.removeItem("user-id"),t.replace("/login")}})]})}),N=(a(81),a(82),function(e){var t="card "+e.className;return Object(n.jsx)("div",{className:t,onClick:e.onClick,children:e.children})}),S=function(e){var t=Object(u.g)(),a=Object(c.useState)(""),i=Object(o.a)(a,2),l=i[0],s=i[1],j=Object(c.useState)(""),f=Object(o.a)(j,2),h=f[0],m=f[1],x=function(){var e=Object(b.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/profile/",a,{headers:{"Content-Type":"application/json"}}).catch((function(e){return console.log("Error: ".concat(e))}));case 2:t.push("/profile-list");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(r.a.Fragment,{children:[Object(n.jsx)(k,{id:localStorage.getItem("user-id")}),Object(n.jsx)(N,{className:"create-new-profile-card",children:Object(n.jsx)("div",{className:"new-profile-container",children:Object(n.jsxs)("form",{className:"new-profile-form",onSubmit:function(e){e.preventDefault(),x({name:l,password:h})},children:[Object(n.jsx)("label",{className:"new-profile-item",htmlFor:"name",children:"Name"}),Object(n.jsx)("input",{className:"new-profile-item",type:"text",id:"name",value:l,onChange:function(e){s(e.target.value)}}),Object(n.jsx)("label",{className:"new-profile-item",htmlFor:"name",children:"Password"}),Object(n.jsx)("input",{className:"new-profile-item",type:"password",id:"password",value:h,onChange:function(e){m(e.target.value)}}),Object(n.jsx)(O,{className:"new-profile-button",children:"Add Profile"})]})})})]})},w=a(14),y=(a(83),a(8)),L=a(6),C=(a(84),function(e){var t="dot ".concat(e.color," ").concat(e.className);return Object(n.jsx)("div",{className:t,onClick:e.onClick,index:e.index})}),E=(a(85),function(e){var t=Object(c.useState)(e.skillData.dataEntries),a=Object(o.a)(t,2),r=a[0],i=a[1],l=function(t){i(t.target.attributes.index.value);var a=t.target.attributes.index.value,n=Object(L.a)(Object(L.a)({},e.skillData),{},{dataEntries:a});e.update(e.index,n)},s=[1,2,3,4,5].map((function(t){return t<=e.skillData.maxDataEntries?t<=r?"green":"black":null})).map((function(t,a){var c=a+1;return e.canEdit?Object(n.jsx)(C,{className:"edit-dot",onClick:l,index:c,color:t},a):Object(n.jsx)(C,{color:t},a)}));return Object(n.jsx)("li",{className:"skill",children:Object(n.jsxs)(N,{children:[Object(n.jsx)("h4",{className:"skill-title",children:e.skillData.name}),Object(n.jsx)("div",{className:"progress-dots-container",children:s}),Object(n.jsxs)("div",{className:"amount-button-container",children:[e.canEdit&&Object(n.jsx)(O,{className:"amount-button",onClick:function(t){var a=r-1;if(a>=0){i(r-1);var n=Object(L.a)(Object(L.a)({},e.skillData),{},{dataEntries:a});e.update(e.index,n)}},children:"\u2212"}),e.canEdit&&Object(n.jsx)(O,{className:"amount-button",onClick:function(t){var a=r+1;if(a<=e.skillData.maxDataEntries){i(r+1);var n=Object(L.a)(Object(L.a)({},e.skillData),{},{dataEntries:a});e.update(e.index,n)}},children:"+"})]})]})})}),P=(a(86),function(e){var t=Object(c.useState)(),a=Object(o.a)(t,2),r=a[0],i=a[1],l=Object(c.useState)(!1),s=Object(o.a)(l,2),u=s[0],j=s[1];Object(c.useEffect)((function(){e.editedProfile[e.skillKey]?i(e.editedProfile[e.skillKey]):i(e.profile[e.skillKey])}),[r,e.editedProfile,e.profile,e.skillKey]);var d=function(t,a){i(r.splice(t,1,a));var n=Object(L.a)(Object(L.a)({},e.editedProfile),{},Object(y.a)({},e.skillKey,r));e.updateProfile(n)},b=u?"skills-list":"skills-list no-show",f=e.profileSkill.map((function(t,a){return Object(n.jsx)(E,{skillData:t,index:a,update:d,canEdit:e.canEdit},t.name)}));return Object(n.jsxs)("li",{className:"skills-list-item",children:[Object(n.jsx)("h3",{className:"skills-title",onClick:function(){j(!u)},children:e.title}),Object(n.jsx)("ul",{className:b,children:f})]})}),I=(a(87),function(e){var t=Object(c.useState)(e.profile.name),a=Object(o.a)(t,2),i=a[0],l=a[1];return Object(n.jsx)(r.a.Fragment,{children:e.canEdit?Object(n.jsxs)("div",{className:"profile-name-edit",children:[Object(n.jsx)("h2",{children:"Name: "}),Object(n.jsx)("input",{className:"name-edit-input",type:"text",value:i,onChange:function(t){l(t.target.value),e.updateProfile(Object(L.a)(Object(L.a)({},e.editedProfile),{},{name:t.target.value}))}})]}):Object(n.jsx)("h2",{children:e.profile.name})})}),A=(a(88),function(e){var t=Object(c.useState)(e.profile.level),a=Object(o.a)(t,2),i=a[0],l=a[1],s=function(t){l(t.target.value),e.updateProfile(Object(L.a)(Object(L.a)({},e.editedProfile),{},{level:t.target.value}))},u=e.skillTitles.map((function(e,t){var a="skill-level-button";return e===i&&(a="active ".concat(a)),Object(n.jsx)(O,{className:a,value:e,onClick:s,children:e},t)}));return Object(n.jsx)(r.a.Fragment,{children:e.canEdit?Object(n.jsxs)("div",{className:"skillLevelContainer",children:[Object(n.jsx)("h2",{children:"Skill Level: "}),Object(n.jsx)("div",{className:"skillLevels",children:u})]}):Object(n.jsx)("h2",{children:e.profile.level})})}),D=(a(89),function(e){var t=Object(c.useState)(e.profile.authorization),a=Object(o.a)(t,2),r=a[0],i=a[1],l=function(t){i(t.target.value),e.updateProfile(Object(L.a)(Object(L.a)({},e.editedProfile),{},{authorization:t.target.value}))},s=["Crew Member","Crew Leader","Administrator"].map((function(e,t){var a="auth-level-button";return(t.toString()===r||t===r)&&(a="active ".concat(a)),Object(n.jsx)(O,{className:a,value:t,onClick:l,children:e},t)}));return Object(n.jsxs)("div",{className:"auth-level-container",children:[Object(n.jsx)("h2",{children:"Authorization Level: "}),Object(n.jsx)("div",{className:"auth-levels",children:s})]})}),J=function(e){var t=Object(c.useState)(),a=Object(o.a)(t,2),r=a[0],i=a[1],l=Object(c.useState)({}),s=Object(o.a)(l,2),j=s[0],f=s[1],h=Object(c.useState)(!1),m=Object(o.a)(h,2),x=m[0],v=m[1],g=Object(c.useState)(),N=Object(o.a)(g,2),S=N[0],y=N[1],L=Object(c.useState)(),C=Object(o.a)(L,2),E=C[0],J=C[1],F=Object(c.useState)(!1),z=Object(o.a)(F,2),B=z[0],H=z[1],K=Object(c.useState)(!1),T=Object(o.a)(K,2),V=T[0],M=T[1],R=Object(u.g)(),W=Object(u.h)().profileId,_=2===S;if(Object(c.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/profile/".concat(t),{headers:{"x-auth-token":localStorage.getItem("x-auth-token")}}).catch((function(e){return console.log(e.response.data.msg)}));case 2:(a=e.sent)||R.replace("/login"),i(a.data.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(b.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/profile/".concat(t),{headers:{"x-auth-token":localStorage.getItem("x-auth-token")}}).catch((function(e){return console.log(e.response.data.msg)}));case 2:(a=e.sent)||R.replace("/login"),y(a.data.data.authorization);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();v(!0),e(W).catch((function(e){v(!1),J(e)})),t(localStorage.getItem("user-id")).catch((function(e){J(e)})),v(!1),H(!1)}),[W,R,B]),localStorage.getItem("x-auth-token")||R.replace("/login"),x||!r)return Object(n.jsx)("p",{children:"Loading..."});if(E)return Object(n.jsx)("p",{children:E});r||R.replace("/login");var Y,q=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,p.a.delete("/profile/".concat(W));case 3:R.replace("/profile-list");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.patch("/profile/".concat(W),t);case 2:H(!0),M(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){M(!V)},U=function(e){f(e)},X=V?"profile-top-container-edit-mode":"profile-top-container";_&&(Y=V?Object(n.jsxs)("div",{className:"buttons-container editmode",children:[Object(n.jsx)(O,{className:"delete-button",onClick:q,children:"Delete"}),Object(n.jsx)(O,{className:"save-button",onClick:G.bind(undefined,j),children:"Save"}),Object(n.jsx)(O,{className:"toggle-button",onClick:Q,children:"Cancel"})]}):Object(n.jsx)("div",{className:"buttons-container ",children:Object(n.jsx)(O,{className:"toggle-button",onClick:Q,children:"Edit"})}));var Z=["skillsAprenticeLevel1","skillsAprenticeLevel2","skillsJourneymanLevel1","skillsJourneymanLevel2"],$=["Apprentice Level 1","Apprentice Level 2","Journeyman Level 1","Journeyman Level 2"],ee=[Object(w.a)(r.skillsAprenticeLevel1),Object(w.a)(r.skillsAprenticeLevel2),Object(w.a)(r.skillsJourneymanLevel1),Object(w.a)(r.skillsJourneymanLevel2)].map((function(e,t){return Object(n.jsx)(P,{skillKey:Z[t],title:$[t],editedProfile:j,profile:r,profileSkill:e,updateProfile:U,canEdit:V},t)}));return Object(n.jsxs)("div",{className:"profile",children:[Object(n.jsx)(k,{id:r._id,auth:e.authLevel}),Object(n.jsxs)("div",{className:X,children:[Object(n.jsxs)("div",{className:"profile-info-container",children:[Object(n.jsx)(I,{canEdit:V,profile:r,editedProfile:j,updateProfile:U}),Object(n.jsx)(A,{canEdit:V,profile:r,editedProfile:j,updateProfile:U,skillTitles:$}),V&&Object(n.jsx)(D,{canEdit:V,profile:r,editedProfile:j,updateProfile:U})]}),Y]}),Object(n.jsx)("ul",{className:"skills",children:ee})]})},F=function(e){var t=Object(c.useState)(""),a=Object(o.a)(t,2),n=a[0],r=a[1],i=Object(c.useState)(!1),l=Object(o.a)(i,2),s=l[0],u=l[1],j=e(n);return{enteredValue:n,valueIsValid:j,hasError:!j&&s,valueChangeHandler:function(e){r(e.target.value)},valueBlurHandler:function(){u(!0)},reset:function(){r(""),u(!1)}}},z=(a(90),function(e){var t=F((function(e){return""!==e.trim()})),a=t.enteredValue,r=t.valueIsValid,i=t.hasError,l=t.valueChangeHandler,s=t.valueBlurHandler,j=F((function(e){return""!==e.trim()})),f=j.enteredValue,h=j.valueIsValid,m=j.hasError,x=j.valueChangeHandler,v=j.valueBlurHandler,g=Object(c.useState)(),k=Object(o.a)(g,2),S=k[0],w=k[1],y=Object(u.g)(),L=!1;r&&h&&(L=!0);var C=function(){var t=Object(b.a)(d.a.mark((function t(a,n){var c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.post("/profile/login/",{name:a,password:n},{headers:{"Content-Type":"application/json"}}).catch((function(e){w(e.response.data.msg)}));case 2:(c=t.sent)&&(localStorage.setItem("x-auth-token",c.data.token),localStorage.setItem("user-id",c.data.id),e.setAuthLevel(c.data.authLevel),y.push("/profile/".concat(c.data.id)));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return Object(n.jsxs)(c.Fragment,{children:[Object(n.jsx)("h1",{className:"login-title",children:"Progress Tracker"}),Object(n.jsxs)(N,{className:"login-card",children:[Object(n.jsx)("h2",{className:"login-header",children:"Login"}),Object(n.jsx)("div",{className:"login-container",children:Object(n.jsxs)("form",{className:"login-item-form",onSubmit:function(e){e.preventDefault(),(r||h)&&C(a,f).catch((function(e){w(e)}))},children:[Object(n.jsx)("label",{className:"login-item",htmlFor:"name",children:"Name"}),Object(n.jsx)("input",{className:"login-item",type:"text",id:"name",onBlur:s,onChange:l,value:a}),i&&Object(n.jsx)("p",{className:"error",children:"Please enter a valid name"}),Object(n.jsx)("label",{className:"login-item",htmlFor:"password",children:"Password"}),Object(n.jsx)("input",{className:"login-item",type:"password",id:"password",onBlur:v,onChange:x,value:f}),m&&Object(n.jsx)("p",{className:"error",children:"Please enter a valid password"}),Object(n.jsx)(O,{className:"login-button",disabled:!L,children:"Login"}),S&&Object(n.jsx)("p",{className:"error",children:"Either your password sucks or you dont have a profile"})]})})]})]})}),B=(a(91),function(e){var t,a=Object(c.useState)("black"),r=Object(o.a)(a,2),i=r[0],l=r[1];return Object(c.useEffect)((function(){e.profileSkill.map((function(e,a){var n=parseInt(e.dataEntries)===parseInt(e.maxDataEntries);t=(0===a||t)&&n})),t&&l("green")}),[i,t]),Object(n.jsxs)("div",{className:"summary-item",children:[Object(n.jsx)("h5",{className:"skill-summary-title",children:e.title}),Object(n.jsx)(C,{className:"skill-summary-dot",color:i})]})}),H=(a(92),function(e){var t=Object(u.g)(),a=[e.profile.skillsAprenticeLevel1,e.profile.skillsAprenticeLevel2,e.profile.skillsJourneymanLevel1,e.profile.skillsJourneymanLevel2],c=["Apprentice Level 1","Apprentice Level 2","Journeyman Level 1","Journeyman Level 2"],r=a.map((function(e,t){return Object(n.jsx)(B,{profileSkill:e,title:c[t]},c[t])}));return Object(n.jsx)("li",{className:"profile-list-container",children:Object(n.jsx)(N,{className:"profile-list-card",onClick:function(){t.push("profile/".concat(e.profile._id))},children:Object(n.jsxs)("div",{className:"profile-list-item",children:[Object(n.jsx)("h3",{className:"profile-name",children:e.profile.name}),Object(n.jsx)("div",{className:"skill-summaries",children:r}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h4",{children:e.profile.level}),Object(n.jsx)("h4",{children:["Crew Member","Crew Leader","Administrator"][e.profile.authorization]})]})]})})})}),K=(a(93),function(e){var t=Object(c.useState)([]),a=Object(o.a)(t,2),i=a[0],l=a[1],s=Object(c.useState)(!1),u=Object(o.a)(s,2),j=u[0],f=u[1],O=Object(c.useState)(),h=Object(o.a)(O,2),m=h[0],x=h[1];if(Object(c.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/profile/",{headers:{"x-auth-token":localStorage.getItem("x-auth-token")}});case 2:if(t=e.sent){e.next=5;break}throw new Error("Something Went Wrong");case 5:l(t.data.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();f(!0),e().catch((function(e){f(!1),x(e.message)})),f(!1)}),[]),j)return Object(n.jsx)("p",{children:"Loading..."});if(m)return Object(n.jsx)("p",{children:m});var v=i.map((function(e){return Object(n.jsx)(H,{profile:e},e.name)}));return Object(n.jsxs)(r.a.Fragment,{children:[Object(n.jsx)(k,{canEdit:e.authLevel}),Object(n.jsx)("ul",{className:"profile-list",children:v})]})});var T=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(c.useState)(),l=Object(o.a)(i,2),s=l[0],j=l[1];return Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(u.d,{children:[Object(n.jsx)(u.b,{path:"/",exact:!0,children:Object(n.jsx)(u.a,{to:"/login"})}),Object(n.jsx)(u.b,{path:"/login",children:Object(n.jsx)(z,{setAuthLevel:j})}),Object(n.jsx)(u.b,{path:"/profile/:profileId",children:Object(n.jsx)(J,{canEdit:a,setCanEdit:r,authLevel:s})}),Object(n.jsx)(u.b,{path:"/new-profile",children:Object(n.jsx)(S,{})}),Object(n.jsx)(u.b,{path:"/profile-list",children:Object(n.jsx)(K,{})})]})})};l.a.render(Object(n.jsx)(s.a,{children:Object(n.jsx)(T,{})}),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.3283a0be.chunk.js.map